image: ubuntu/22.04
packages:
  - fonts-dejavu
  - libffi-dev
  - libharfbuzz-dev
  - libjpeg-dev
  - libopenjp2-7-dev
  - libpango-1.0-0
  - libpangoft2-1.0-0
  - python-is-python3
  - python3-pip
sources:
  - https://github.com/WhyNotHugo/django-renderpdf
environment:
  FORCE_COLOR: yes
  CI: true
tasks:
  - check-python:
      python --version | grep 'Python 3.10'
  - tox:
      # distribution tox is too old
      sudo pip install tox
  - tests: |
      cd django-renderpdf
      tox  -e py
  - lint: |
      cd django-renderpdf
      tox  -e lint
